<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator><link href="https://mozz.in/feed.xml" rel="self" type="application/atom+xml" /><link href="https://mozz.in/" rel="alternate" type="text/html" /><updated>2020-12-12T00:50:24+08:00</updated><id>https://mozz.in/feed.xml</id><title type="html">è«ç²’çš„åšå®¢</title><subtitle>æ—¶é—´æ´—åˆ·ç€æ¯ä¸€ä¸ªäººï¼Œå¸Œæœ›å¤§å®¶å®‰å¥½
</subtitle><entry><title type="html">golang1.5ä¹‹ågoplsåœ¨vscodeä¸­æ— æ³•å¯åŠ¨çš„é—®é¢˜</title><link href="https://mozz.in/go/2020/11/13/gopls-withou-go-mod.html" rel="alternate" type="text/html" title="golang1.5ä¹‹ågoplsåœ¨vscodeä¸­æ— æ³•å¯åŠ¨çš„é—®é¢˜" /><published>2020-11-13T23:30:00+08:00</published><updated>2020-11-13T23:30:00+08:00</updated><id>https://mozz.in/go/2020/11/13/gopls-withou-go-mod</id><content type="html" xml:base="https://mozz.in/go/2020/11/13/gopls-withou-go-mod.html">&lt;h3 id=&quot;gopls-åœ¨-go15-ä¹‹åçš„å‘---ç®€è¿°&quot;&gt;gopls åœ¨ go1.5 ä¹‹åçš„å‘ - ç®€è¿°&lt;/h3&gt;

&lt;p&gt;ç”±äº go1.5 ä¹‹åå®˜æ–¹çš„ go module æ˜¯é»˜è®¤å¼ºåˆ¶å¼€å¯çš„ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ gopls åœ¨ä¸€äº›æœªä½¿ç”¨ go module çš„é¡¹ç›®ä¸­ä¼šæœ‰ä¸€äº›å‘ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚å…¬å¸çš„è€é¡¹ç›®è¿˜ç”¨çš„ govendor è¿™ä¸ªä¾èµ–ç®¡ç†å·¥å…·ï¼Œå®˜æ–¹æ—©å°±æœªç»´æŠ¤äº†ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å®è¿ç§»åˆ°æ–°çš„ go module ä¹Ÿä¸éº»çƒ¦ï¼Œä½†æ˜¯ä¼¼ä¹å¹¶æ²¡äººæ¥æ¨åŠ¨è¿™ä¸ªäº‹ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æœªä½¿ç”¨-go-module-çš„å‘&quot;&gt;æœªä½¿ç”¨ go module çš„å‘&lt;/h3&gt;

&lt;h4 id=&quot;ä¸€gopls-æ— æ³•å¯åŠ¨æç¤ºå¿…é¡»ä½¿ç”¨-go-mod&quot;&gt;ä¸€ã€gopls æ— æ³•å¯åŠ¨ï¼Œæç¤ºå¿…é¡»ä½¿ç”¨ go mod&lt;/h4&gt;

&lt;p&gt;è§£å†³æ–¹å¼ï¼šä¿®æ”¹ vscode çš„é…ç½® settings.json æ–‡ä»¶ï¼Œæ–°å¢é…ç½®&lt;/p&gt;

&lt;div class=&quot;language-json highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;go.toolsEnvVars&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;&quot;GO111MODULE&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;auto&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;gopls ä¼¼ä¹æ— æ³•è¯†åˆ«çš„ç³»ç»Ÿç¯å¢ƒå˜é‡ä¸­çš„ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;GO111MODULE&lt;/code&gt; å˜é‡ï¼Œä½†æ˜¯åœ¨è®¾ç½®ä¸­ä¿®æ”¹ï¼Œæ˜¯æœ‰æ•ˆçš„ã€‚&lt;/p&gt;

&lt;h4 id=&quot;äºŒgopls-è­¦å‘Šä¾èµ–æ¨¡å—ä¸å¯¹&quot;&gt;äºŒã€gopls è­¦å‘Šï¼šä¾èµ–æ¨¡å—ä¸å¯¹&lt;/h4&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;The code in the workspace failed to compile (see the error message below).
If you believe this is a mistake, please file an issue: https://github.com/golang/go/issues/new.
unexpected directory layout:
	import path: _/Users/me/go-project/src/github.com/compeny/compeny-api/app/models
	root: /Users/me/go-project/src
	dir: /Users/me/go-project/src/github.com/compeny/compeny-api/app/models
	expand root: /Users/me/go-project
	expand dir: /Users/me/go-project/src/github.com/compeny/compeny-api/app/models
	separator: /
unexpected directory layout:
	import path: _/Users/me/go-project/src/github.com/compeny/compeny-api/app/models
	root: /Users/me/go-project/src
	dir: /Users/me/go-project/src/github.com/compeny/compeny-api/app/models
	expand root: /Users/me/go-project
	expand dir: /Users/me/go-project/src/github.com/compeny/compeny-api/app/models
	separator: /
: packages.Load error
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è§£å†³æ–¹å¼ï¼šæ ¹æ®æç¤ºï¼Œåˆ é™¤ $GOPATH ä¸­ pkgã€src ä¸­å¯èƒ½é‡å¤çš„ä»£ç å³å¯&lt;/p&gt;</content><author><name>me</name></author><category term="go" /><category term="go" /><summary type="html">gopls åœ¨ go1.5 ä¹‹åçš„å‘ - ç®€è¿°</summary></entry><entry><title type="html">æœ€è¿‘çš„ä¸€äº›gitç ”ç©¶</title><link href="https://mozz.in/git/2020/11/13/git.html" rel="alternate" type="text/html" title="æœ€è¿‘çš„ä¸€äº›gitç ”ç©¶" /><published>2020-11-13T02:30:00+08:00</published><updated>2020-11-13T02:30:00+08:00</updated><id>https://mozz.in/git/2020/11/13/git</id><content type="html" xml:base="https://mozz.in/git/2020/11/13/git.html">&lt;h3 id=&quot;å‰è¯&quot;&gt;å‰è¯&lt;/h3&gt;

&lt;p&gt;æœ€è¿‘åœ¨å†™ git çš„ä¸€ä¸ªæœåŠ¡ï¼Œä¹Ÿå°±æ˜¯ growerlab çš„ä¸€ä¸ªç»„ä»¶ã€‚&lt;/p&gt;

&lt;p&gt;mensa - https://github.com/growerlab/mensa&lt;/p&gt;

&lt;p&gt;æœ€è¿‘åšçš„ç ”ç©¶ä¸»è¦æ˜¯ç”¨æˆ·çš„æ¨é€æ—¶ä»¥åŠæ¨é€åˆ°æœåŠ¡å™¨çš„ hook ç›¸å…³çš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;h3 id=&quot;æ¨é€æ—¶çš„æƒé™éªŒè¯æ—¶æœº&quot;&gt;æ¨é€æ—¶çš„æƒé™éªŒè¯æ—¶æœº&lt;/h3&gt;

&lt;p&gt;æ•´ä¸ªæœåŠ¡æµç¨‹&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;git push&lt;/li&gt;
  &lt;li&gt;mensa - è°ƒç”¨ git-refs æƒé™æƒé™&lt;/li&gt;
  &lt;li&gt;mensa - è°ƒç”¨ git-receive-pack&lt;/li&gt;
  &lt;li&gt;mensa - è°ƒç”¨ hooks åˆ›å»º events
    &lt;ul&gt;
      &lt;li&gt;hook æ—¶æœº&lt;/li&gt;
      &lt;li&gt;æ–°åˆ†æ”¯çš„ commits&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;hook-æ—¶æœºçš„å‘&quot;&gt;hook æ—¶æœºçš„å‘&lt;/h4&gt;

&lt;p&gt;æœ€å¼€å§‹æ˜¯æƒ³åœ¨åˆ›å»ºä»“åº“çš„æ—¶å€™ï¼Œln -s è½¯é“¾ä¸€ä¸ª update çš„ hook åˆ°å¯¹åº”çš„é’©å­ï¼Œè¿™ä¸ªæ˜¯å¾ˆä¹…ä¹‹å‰çš„ gitlab çš„ç‰ˆæœ¬çš„æ–¹å¼ã€‚&lt;/p&gt;

&lt;p&gt;åæ¥æŸ¥é˜… gitlab å¼€å‘çš„ gitaly ä»£ç ï¼Œæ‰å‘ç° gitlab è¿™äº›å¹´åšäº†å¾ˆå¤šçš„æ”¹é€ ï¼Œé¿å¼€äº†å¾ˆå¤š n å¹´å‰çš„å‘ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚ hook çš„æ¥å…¥æ—¶æœºæ”¹æˆäº†è°ƒç”¨ git å‘½ä»¤æ—¶&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git xxxx -c core.hooksPath=hook path
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ ·å…¶å®è¿˜æ˜¯éå¸¸æ–¹ä¾¿çš„ï¼Œé¿å…äº†æ— é¿å…çš„è½¯é“¾&lt;/p&gt;

&lt;h4 id=&quot;æ–°åˆ†æ”¯çš„-commits&quot;&gt;æ–°åˆ†æ”¯çš„ commits&lt;/h4&gt;

&lt;p&gt;hook çš„åŠŸèƒ½ä¹‹ä¸€å°±æ˜¯åˆ›å»º eventsã€‚&lt;/p&gt;

&lt;p&gt;æ™®é€šçš„ commits è¿˜å¥½è¯´ï¼Œä½†æ˜¯å¦‚æœä¸€ä¸ªæ–°çš„ åˆ†æ”¯ï¼Œå¹¶ä¸”é‡Œé¢æœ‰å‡ ä¸ªæ–°çš„ commits æ—¶ï¼Œè¿™ä¸ªé—®é¢˜å€’æ˜¯èŠ±äº†æˆ‘ä¸€ç‚¹æ—¶é—´ç ”ç©¶æµ‹è¯•ã€‚&lt;/p&gt;

&lt;p&gt;åæ¥å‘ç°ï¼Œè°ƒç”¨ update hook æ—¶ï¼Œè¿˜å¹¶ä¸ä¼šåœ¨ refs ä¸­åˆ›å»ºå¯¹åº”çš„åˆ†æ”¯ã€‚&lt;/p&gt;

&lt;p&gt;å¹¶ä¸”é€šè¿‡ go-git è¯•éªŒå‘ç°ï¼Œæ–°æäº¤çš„åˆ†æ”¯ä¸­çš„æ–° commitï¼ŒæŸ¥æ‰¾ä»–çš„ parents æ—¶ï¼Œåªèƒ½æ‹¿åˆ°æ–°æäº¤çš„ commitsã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥å½“ä¸ç®¡ç”¨æˆ·æäº¤æ–°çš„ branch è¿˜æ˜¯æ–°çš„ tagï¼Œéƒ½æ˜¯å¯ä»¥æ‹¿åˆ°æ–°æäº¤çš„ commit çš„ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å®Œ&quot;&gt;å®Œ&lt;/h3&gt;

&lt;p&gt;åœ¨åšä»£ç æ‰˜ç®¡å¹³å°æ—¶ï¼Œå…¶å®å¾ˆå¤š git çš„æœ¬èº«çš„å¾ˆå¤šé—®é¢˜éƒ½æ˜¯å¯ä»¥é€šè¿‡æµ‹è¯•å‘ç°çš„ï¼Œæœ‰çš„å‘å¿…é¡»è¸©å‘€ã€‚&lt;/p&gt;

&lt;p&gt;åˆè®°ä¸€ç‰‡æµæ°´è´¦ã€‚ã€‚&lt;/p&gt;</content><author><name>moli</name></author><category term="git" /><category term="git" /><summary type="html">å‰è¯</summary></entry><entry><title type="html">é€šè¿‡UCloud GlobalSSHåŠ é€Ÿgithubæ¨æ‹‰é€Ÿåº¦/æš´éœ²å†…ç½‘æ›¿ä»£èŠ±ç”Ÿå£³</title><link href="https://mozz.in/github/2020/08/17/ucloud-globalssh.html" rel="alternate" type="text/html" title="é€šè¿‡UCloud GlobalSSHåŠ é€Ÿgithubæ¨æ‹‰é€Ÿåº¦/æš´éœ²å†…ç½‘æ›¿ä»£èŠ±ç”Ÿå£³" /><published>2020-08-17T06:30:00+08:00</published><updated>2020-08-17T06:30:00+08:00</updated><id>https://mozz.in/github/2020/08/17/ucloud-globalssh</id><content type="html" xml:base="https://mozz.in/github/2020/08/17/ucloud-globalssh.html">&lt;h3 id=&quot;å‰è¯&quot;&gt;å‰è¯&lt;/h3&gt;

&lt;p&gt;æœ¬æ¥æ­£åœ¨æƒ³é‡æ„ growerlab çš„æƒé™åŠŸèƒ½ &lt;a href=&quot;https://github.com/growerlab&quot;&gt;github.com/growerlab&lt;/a&gt;ï¼Œè€ƒè™‘åˆ°æœªæ¥æƒé™çš„éªŒè¯æ˜¯ä¸€ä»¶éå¸¸éº»çƒ¦çš„äº‹ï¼Œä»¥åŠåœ¨å…¶ä»–å¾®æœåŠ¡çš„åŠŸèƒ½é€šç”¨æ€§ä¸Šï¼Œæ‰€ä»¥æ‰“ç®—é‡æ–°è®¾è®¡æƒé™èƒ½åŠ›ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶ï¼ŒåŠŸèƒ½æ˜¯è·Ÿåœ¨ ONES çš„åŒäº‹è®¨è®ºæ²Ÿé€šçš„è®¾è®¡ï¼ŒéåŸåˆ›ï¼Œæ”¹å¤©æ¨åˆ°ä»“åº“ä¸­ã€‚&lt;/p&gt;

&lt;p&gt;ONES æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„é¡¹ç›®ç®¡ç†ç³»ç»Ÿï¼Œæ¬¢è¿å¤§ä½¬ä»¬å°è¯•ä½¿ç”¨ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ucloud-globalssh-çš„å¦™ç”¨&quot;&gt;UCloud GlobalSSH çš„å¦™ç”¨&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆæ„Ÿè°¢ ucloud çš„ GlobalSSH åŠŸèƒ½ï¼Œè¿™ä¸ªå¤ªæ£’äº†ï¼å¸Œæœ›ä¸è¦åœæ‰è¿™ä¸ªæœåŠ¡ï¼ˆç›®å‰å…è´¹ï¼Œå•¥æ—¶å€™æ”¶è´¹ä¹Ÿæ”¯æŒä¸€æ³¢ï¼ï¼‰&lt;/p&gt;

&lt;p&gt;ç›®å‰æˆ‘ä¸»è¦ç”¨æ¥åš github çš„æ¨æ‹‰åŠ é€Ÿã€æš´éœ²å†…ç½‘æ›¿ä»£èŠ±ç”Ÿå£³ã€‚&lt;/p&gt;

&lt;h4 id=&quot;github-æ¨æ‹‰åŠ é€Ÿ&quot;&gt;github æ¨æ‹‰åŠ é€Ÿ&lt;/h4&gt;

&lt;p&gt;å› ä¸ºå›½å†…ä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œæˆ‘ä»¬ä½¿ç”¨ github æ¨æ‹‰ä»£ç éå¸¸çš„å¡ã€æ…¢ã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯å…¶å®æˆ‘ä»¬å¯ä»¥é€šè¿‡ TCP çº§åˆ«çš„ä»£ç†è½¬å‘ SSH æµé‡ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœè‡ªå»ºä¸€ä¸ª VPS æ¥åšè¿™ä¸ªäº‹æƒ…ï¼Œå…¶å®ä½¿ç”¨ã€ç»´æŠ¤æˆæœ¬è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ UCloud çš„ GlobalSSH æœåŠ¡ï¼ˆæ‰€è°“æ˜¯å…¨çƒ SSH åŠ é€ŸæœåŠ¡ï¼Ÿï¼‰&lt;/p&gt;

&lt;p&gt;äº²æµ‹å¯è¡Œã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2020/08/github-ssh-1.png&quot; alt=&quot;æˆªå›¾&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/2020/08/github-ssh-2.png&quot; alt=&quot;æˆªå›¾2&quot; /&gt;&lt;/p&gt;

&lt;p&gt;åˆ›å»ºä¸€ä¸ªä½ çš„ GlobalSSH æœåŠ¡å³å¯ï¼Œé€šè¿‡ ping github.com å³å¯æ‹¿åˆ°æœåŠ¡å™¨åœ°å€ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åæˆ‘ä»¬å¾—åˆ°ã€ŒåŠ é€ŸåŸŸåã€ã€‚&lt;/p&gt;

&lt;p&gt;æ¯”å¦‚ç°åœ¨æˆ‘ä»¬è¦åŠ é€Ÿ github é¡¹ç›®ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªé¡¹ç›®ç°åœ¨çš„ ssh åœ°å€æ˜¯ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git@github.com:xxx/xxx.git&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;ç°åœ¨æˆ‘ä»¬å°†ä»–æ”¹æˆ &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git@xxxx.ipssh.net:xxx/xxx.git&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;æ³¨æ„åŠ ç²—éƒ¨åˆ†å°±æ˜¯æˆ‘ä»¬çš„åŠ é€ŸæœåŠ¡å™¨åœ°å€ã€‚&lt;/p&gt;

&lt;p&gt;ç„¶åæˆ‘ä»¬åœ¨ github é¡¹ç›®ç›®å½•ä¸‹æ‰§è¡Œï¼š&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ git remote set-url origin git@xxxx.ipssh.net:xxx/xxx.git
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h5 id=&quot;å¦å¤–ä¸€ç§ç®€å•æ–¹æ³•&quot;&gt;å¦å¤–ä¸€ç§ç®€å•æ–¹æ³•&lt;/h5&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ vim ~/.ssh/config
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ–°å¢é…ç½®ï¼š&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; Host github.com
     User    git
     Hostname 52.74.223.119.ipssh.net
     Port    22
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ ·æ‰€æœ‰çš„ github.com èµ° ssh æ—¶ï¼Œéƒ½ä¼šèµ°è¯¥ hostname&lt;/p&gt;

&lt;p&gt;å®Œæˆæ›¿æ¢åå°±æ˜¯ä½¿ç”¨æ–°çš„åŠ é€Ÿåœ°å€äº†ã€‚&lt;/p&gt;

&lt;h4 id=&quot;æš´éœ²å†…ç½‘æ›¿ä»£èŠ±ç”Ÿå£³&quot;&gt;æš´éœ²å†…ç½‘æ›¿ä»£èŠ±ç”Ÿå£³&lt;/h4&gt;

&lt;p&gt;å› ä¸ºæœ€è¿‘åšé£ä¹¦çš„æœºå™¨äººå¼€å‘ï¼Œæ‰€æœ‰éœ€è¦è°ƒè¯•æœºå™¨äººï¼ŒOAuth2 æˆæƒã€ticket å›è°ƒç­‰ï¼Œéƒ½éœ€è¦æš´éœ²æœ¬åœ°çš„å†…ç½‘ï¼Œä½¿å†…ç½‘ç¨‹åºèƒ½è¢«å…¬ç½‘è®¿é—®ã€‚&lt;/p&gt;

&lt;p&gt;ç›¸åŒçš„åŠŸèƒ½æœ‰èŠ±ç”Ÿå£³ï¼Œngrokã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;èŠ±ç”Ÿå£³ï¼šåŸŸåè¦è´­ä¹°ï¼Œæœ‰ç‚¹éº»çƒ¦&lt;/li&gt;
  &lt;li&gt;ngrokï¼šå…è´¹ä¸å›ºå®šåŸŸåï¼Œè€Œä¸”ä¸ç®¡å…è´¹ã€æ”¶è´¹é€Ÿåº¦éƒ½ä¸å¿«ï¼Œæ¯•ç«Ÿæ˜¯å›½å¤–æœåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è¿™ä¸ªåŠŸèƒ½å…¶å®æ˜¯è¦ä¸€ä¸ª VPS çš„ï¼Œä½†æ˜¯å› ä¸ºæˆ‘çš„æœåŠ¡å™¨åœ¨å›½å¤–ï¼Œç›´æ¥ ssh ä¸Šç»å¸¸æ–­æ–­ç»­ç»­éå¸¸è‹¦æ¼ã€‚&lt;/p&gt;

&lt;p&gt;ç›®å‰å›½å†…è¿™ä¸ªå†²æµªç¯å¢ƒï¼Œç¨‹åºå‘˜åº”è¯¥æ˜¯äººæ‰‹ä¸€å° VPSï¼Ÿ&lt;/p&gt;

&lt;p&gt;æ‰€ä»¥ä½¿ç”¨ GlobalSSH æ¥ä¸­è½¬ï¼Œæ•ˆç‡é€Ÿåº¦æå‡éå¸¸ï¼&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;åœ¨ vps ä¸Šå¯åŠ¨ nginx&lt;/li&gt;
  &lt;li&gt;æ–°å¢ä¸€ä¸ªåå‘ä»£ç†é…ç½®ï¼Œå°†è¯·æ±‚å…¨éƒ¨è½¬åˆ° 2222 ç«¯å£&lt;/li&gt;
  &lt;li&gt;å¦‚ä¸‹æ–¹å¼å¯åŠ¨ ssh ä»£ç†&lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;$ ssh -vnNt -i ~/.ssh/id_rsa -R 2222:localhost:9001 root@123.123.123.123.ipssh.net
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ · nginx ä¼šå°†è¯·æ±‚è½¬åˆ° 2222 ç«¯å£ï¼Œssh ä»£ç†ä¼šå°† 2222 çš„è¯·æ±‚è½¬åˆ°æœ¬åœ°çš„ 9001 ç«¯å£ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨æœ¬åœ°æœåŠ¡å¯åŠ¨å¹¶ç›‘å¬ 9001 ç«¯å£ï¼Œå½“ç”¨æˆ·è®¿é—®æœåŠ¡å™¨æ—¶ï¼Œnginx ä¼šå°†æ•´ä¸ªè¯·æ±‚è½¬åˆ°æœ¬åœ°ç›‘å¬ 9001 ç«¯å£çš„ç¨‹åºã€‚&lt;/p&gt;

&lt;h4 id=&quot;å®Œæ¯•&quot;&gt;å®Œæ¯•&lt;/h4&gt;

&lt;p&gt;è®°äº†ä¸€ç¯‡æµæ°´è´¦ï¼Œå¸Œæœ›èƒ½å¸®åˆ°æœ‰éœ€è¦çš„äººã€‚&lt;/p&gt;</content><author><name>moli</name></author><category term="github" /><category term="github" /><summary type="html">å‰è¯</summary></entry><entry><title type="html">ç¨‹åºè®¾è®¡çš„ä¸€äº›æ€»ç»“</title><link href="https://mozz.in/programmer/life/2020/04/22/programmer-sum-up.html" rel="alternate" type="text/html" title="ç¨‹åºè®¾è®¡çš„ä¸€äº›æ€»ç»“" /><published>2020-04-22T08:30:00+08:00</published><updated>2020-04-22T08:30:00+08:00</updated><id>https://mozz.in/programmer/life/2020/04/22/programmer-sum-up</id><content type="html" xml:base="https://mozz.in/programmer/life/2020/04/22/programmer-sum-up.html">&lt;p&gt;ç¡®å®å¤ªä¹…æ²¡å†™æ–‡ç« äº†ï¼Œæ²¡å•¥ç†ç”±ï¼Œå°±æ˜¯æ‡’äº†ã€‚&lt;/p&gt;

&lt;p&gt;æ²¡æƒ³åˆ° 2020 å¹´è¿‡å¾—çœŸå¿«ï¼Œçœ¼çœ‹è¿›åº¦æ¡å·²ç»å¿« 40%äº†ã€‚&lt;/p&gt;

&lt;p&gt;2020 å¹´å‘ç”Ÿäº†å¤ªå¤šäº‹ï¼Œå¤§åˆ°å…¨çƒç–«æƒ…ï¼Œå°åˆ°å®¶åº­çŸ›ç›¾ï¼Œæ€»ä½“æ¥è¯´ä¸å¤ªèµ°è¿ï¼Œä½†æ˜¯äººæ€»è¦ä¹è§‚ä¸€ç‚¹ï¼Œå¦åˆ™çœŸçš„ä¼šä¸å¤ªå¥½è¿‡ã€‚&lt;/p&gt;

&lt;p&gt;åé¢˜äº†ï¼Œè¿™ç¯‡æ–‡å­—æ˜¯æƒ³å†™ä¸€äº›ç¨‹åºè®¾è®¡ç›¸å…³çš„ä¸€äº›æ„Ÿæ‚Ÿï¼Œè§‚å¯Ÿï¼Œæ„Ÿæ…¨ã€‚è§‚å¯Ÿä¸€äº›å‰å®³çš„äººï¼Œå­¦ä¹ ä»–äººä¼˜ç‚¹ï¼Œè¡¥å……ä¸€äº›è‡ªå·±çš„ä¸è¶³ã€‚&lt;/p&gt;

&lt;h3 id=&quot;èªæ˜äººçš„è‡ªå¸¦å¤©èµ‹&quot;&gt;èªæ˜äººçš„è‡ªå¸¦å¤©èµ‹&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;å¦‚æœä¸€å®šè¦è¯´èªæ˜äººä¹‹æ‰€ä»¥èªæ˜ï¼Œæˆ‘ä¸€å®šä¼šè¯´ï¼šè®°å¿†åŠ›ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å°è±¡ä¸­ç‰©ç†ç•Œã€æ•°å­¦ç•Œå¤§ä½¬ï¼Œç°å®ä¸­è®¤è¯†çš„èªæ˜äººï¼Œæ— ä¸€ä¾‹å¤–è®°å¿†åŠ›éƒ½æŒºå¼ºã€‚å¯¹æ›¾ç»å‘ç”Ÿçš„äº‹ï¼Œç”šè‡³ä¸€äº›ç»†èŠ‚æœ«æ¢¢ä¾ç„¶æè¿°å¾—éå¸¸æ¸…æ™°ã€‚&lt;/p&gt;

&lt;p&gt;æœ‰ä¸€æ¬¡é—®ä¸ªå¤§ä½¬ä¸€ä¸ªä»£ç é—®é¢˜ï¼Œçœ‹ git è®°å½•å¯èƒ½å·²ç»æ˜¯ 2 å¹´å‰çš„ä»£ç ï¼Œä¸»è¦ç»†èŠ‚ä¾ç„¶å¾ˆæ¸…æ¥šã€‚&lt;/p&gt;

&lt;p&gt;è€Œã€Œæ¨ç†ã€è·Ÿå¤§è„‘ä¸­çš„ä¿¡æ¯é‡æ˜¯æœ‰ç›´æ¥å…³ç³»çš„ã€‚&lt;/p&gt;

&lt;p&gt;so~ æœ‰äº›å¤©èµ‹å¾—è®¤å‘½~&lt;/p&gt;

&lt;h4 id=&quot;æé«˜è®°å¿†åŠ›&quot;&gt;æé«˜è®°å¿†åŠ›&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´&lt;/li&gt;
  &lt;li&gt;æƒ³æ›´å¤šï¼Œæ›´æ·±ï¼ŒæŒç»­æ”¹è¿›&lt;/li&gt;
  &lt;li&gt;ç¡çœ ã€ç¡çœ ã€ç¡çœ ï¼&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;åœ¨ç¨‹åºå¼€å‘ä¸­ï¼Œå‰å®³çš„ç¨‹åºå‘˜ä¼šæƒ³æ¸…æ¥šæ–¹æ–¹é¢é¢ï¼Œæ–‡å­—ã€UMLã€è„‘å›¾ã€æ¶æ„å›¾ã€æµç¨‹å›¾ï¼Œè¶Šç»†è¶Šå¥½ï¼Œè¿™äº›ä¸œè¥¿æœ¬è´¨ä¸Šæ˜¯åœ¨å¸®åŠ©è®°å¿†ã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶æ›´é‡è¦çš„æ˜¯ï¼Œæå‰æƒ³å¥½ï¼Œè§„åˆ’å¥½ä½ è¦åšçš„äº‹ã€‚&lt;/p&gt;

&lt;p&gt;è‰¯å¥½çš„ç¡çœ åˆ™æ˜¯æœ€å¥½çš„å¤§è„‘å…»æŠ¤ã€‚&lt;/p&gt;

&lt;p&gt;æŸå¤§ä½¬ï¼šç¨‹åºè®¾è®¡=ç¡å¥½è§‰&lt;/p&gt;

&lt;p&gt;å¤§è„‘çš„ä¿å…»å¾ˆé‡è¦ã€‚&lt;/p&gt;

&lt;h3 id=&quot;é—®é¢˜çš„æŠ½è±¡æ±‡æ€»ä¸æ–¹æ¡ˆè¾“å‡º&quot;&gt;é—®é¢˜çš„æŠ½è±¡æ±‡æ€»ä¸æ–¹æ¡ˆè¾“å‡º&lt;/h3&gt;

&lt;p&gt;å·¥ä½œä¸­ï¼Œéšç€å¼€å‘ã€è¿­ä»£ï¼Œæˆ‘ä»¬æ€»ä¼šç¢°åˆ°ä¸€ç³»åˆ—çš„é—®é¢˜ï¼Œè¿™äº›é—®é¢˜å¯èƒ½ä¼šæœ‰ä¸€äº›è”ç³»ï¼Œè§„å¾‹ã€‚&lt;/p&gt;

&lt;p&gt;é‚£ä¹ˆï¼Œå¯¹é—®é¢˜çš„ åˆ†ç±»ï¼Œå½’çº³ï¼Œæ€»ç»“ï¼Œæ‰¾å‡ºå…±åŒç‚¹ï¼Œæˆ–æœ¬è´¨çš„é—®é¢˜ï¼Œæœ€ç»ˆè¾“å‡ºä¸€ä¸ªåˆç†çš„æ–¹æ¡ˆæ¥è§£å†³é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ç§èƒ½åŠ›éœ€è¦ç»éªŒä»¥åŠä¸°å¯Œçš„çŸ¥è¯†ï¼Œè§†é‡æ¥æä¾›æ”¯æ’‘ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å®ä¹Ÿéœ€è¦ä¸€å®šçš„åˆ›é€ åŠ›ã€‚&lt;/p&gt;

&lt;h3 id=&quot;ç¨‹åºè®¾è®¡æ˜¯ä¸€é—¨åˆ›é€ æ€§çš„å·¥ä½œ&quot;&gt;ç¨‹åºè®¾è®¡æ˜¯ä¸€é—¨åˆ›é€ æ€§çš„å·¥ä½œ&lt;/h3&gt;

&lt;p&gt;ä¸Šé¢è¯´åˆ°ç¨‹åºè®¾è®¡ä¸­çš„ä¸€ç³»åˆ—é—®é¢˜ï¼Œå·¥ç¨‹å¸ˆæœ¬è´¨ä¸Šå°±æ˜¯ä¸€ç›´åœ¨è§£å†³å„ç±»é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;è€Œå„ç±»è§£å†³æ–¹æ¡ˆçš„è¾“å‡ºï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€é—¨åˆ›é€ æ€§çš„å·¥ä½œï¼Œä¹Ÿè®¸æœ‰ä¸€äº›æ–¹æ¡ˆå·²ç»å­˜åœ¨äº†è½®å­ï¼Œå¯ä»¥æ‹¿è¿‡æ¥ç”¨ï¼Œæ¯”å¦‚æœç´¢åŠŸèƒ½ esã€‚&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯æŸäº›æ²¡æœ‰çš„åŠŸèƒ½ï¼Œæ˜¯åˆ›é€ æ€§çš„ï¼Œéœ€è¦æƒè¡¡å„ç§åˆ©å¼Šçš„ï¼Œç”šè‡³éœ€è¦ä¸€äº›æ–‡çŒ®æ¥æä¾›æ”¯æ’‘çš„ï¼Œè‡³å°‘åœ¨é€»è¾‘ä¸Šåˆæƒ…åˆç†çš„ã€‚&lt;/p&gt;

&lt;p&gt;æ™®é€šç¨‹åºå‘˜ä¸é«˜é˜¶ç¨‹åºå‘˜ä¸€å®šç¨‹åº¦ä¸Šå°±æ˜¯è¿™ç§å·®å¼‚ï¼Œè¿™ç§å·®å¼‚å¾€å¾€æ˜¯å¾ˆéš¾è¿½èµ¶çš„ã€‚&lt;/p&gt;

&lt;p&gt;æ™®é€šç¨‹åºå‘˜å¦‚æœæƒ³å¾€ä¸Šçˆ¬ï¼Œåšæ›´å‰å®³çš„ç¨‹åºå‘˜ï¼Œéœ€è¦æ€è€ƒæ›´å¤šã€‚&lt;/p&gt;

&lt;p&gt;ä¸å‰å®³çš„ç¨‹åºå‘˜äº¤æµæ˜¯éå¸¸å¥½çš„æ–¹å¼ï¼Œå½“ç„¶ä½ å¾—æå‰å°†ä½ çš„é—®é¢˜æ•´ç†æˆé—®é¢˜ï¼Œä½ çš„è§£å†³æ–¹æ¡ˆï¼Œä½ çš„æ€è·¯ï¼Œè¦è§£å†³çš„é—®é¢˜ï¼Œè¿™æ ·æ›´å¤§ä½¬äº¤æµæ‰èƒ½æ›´é«˜æ•ˆã€‚&lt;/p&gt;</content><author><name>moli</name></author><category term="programmer" /><category term="life" /><category term="golang" /><category term="programmer" /><summary type="html">ç¡®å®å¤ªä¹…æ²¡å†™æ–‡ç« äº†ï¼Œæ²¡å•¥ç†ç”±ï¼Œå°±æ˜¯æ‡’äº†ã€‚</summary></entry><entry><title type="html">æ•°æ®åº“ä¸­çš„é‡å‹å­—æ®µè¿ç§»ä¼˜åŒ–ï¼ˆgolangï¼‰</title><link href="https://mozz.in/go/%E6%95%B0%E6%8D%AE%E5%BA%93/2019/12/17/database-migrate-optimization.html" rel="alternate" type="text/html" title="æ•°æ®åº“ä¸­çš„é‡å‹å­—æ®µè¿ç§»ä¼˜åŒ–ï¼ˆgolangï¼‰" /><published>2019-12-17T03:30:00+08:00</published><updated>2019-12-17T03:30:00+08:00</updated><id>https://mozz.in/go/%E6%95%B0%E6%8D%AE%E5%BA%93/2019/12/17/database-migrate-optimization</id><content type="html" xml:base="https://mozz.in/go/%E6%95%B0%E6%8D%AE%E5%BA%93/2019/12/17/database-migrate-optimization.html">&lt;p&gt;æœ€è¿‘åœ¨æ•°æ®è¿ç§»ä¸­çš„ä¸€äº›ä¼˜åŒ–ç‚¹ï¼Œåœ¨è¿™é‡Œåˆ†äº«ä¸€äº›ï¼Œå½“ç„¶ä¹Ÿä¸ä¸€å®šæ˜¯æœ€ä¼˜çš„ï¼Œæ¬¢è¿è®¨è®ºã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆï¼Œåœ¨æŸäº›æ•°æ®è¡¨ä¸­çš„å­—æ®µï¼Œå­˜ç€éå¸¸å¤§çš„jsonæ•°æ®ã€‚&lt;/p&gt;

&lt;p&gt;å¹¶ä¸”æœ‰å‡ åä¸‡è¡Œæ•°æ®ï¼Œéœ€è¦æ›´æ”¹jsonä¸­çš„æŸä¸ªæ•°ç»„å­—æ®µï¼Œè¿½åŠ ä¸€äº›å…ƒç´ ã€‚&lt;/p&gt;

&lt;h4 id=&quot;å¸¸è§„æ–¹å¼&quot;&gt;å¸¸è§„æ–¹å¼&lt;/h4&gt;

&lt;ul&gt;
  &lt;li&gt;è¯»å–æ‰€æœ‰çš„è¡Œ&lt;/li&gt;
  &lt;li&gt;jsonååºåˆ—åŒ–&lt;/li&gt;
  &lt;li&gt;ä¿®æ”¹æ•°æ®&lt;/li&gt;
  &lt;li&gt;jsonåºåˆ—å·å¹¶ä¿æŒåˆ°æ•°æ®åº“&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æœ‰å‡ ä¸ªé—®é¢˜&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;å†…å­˜å ç”¨éå¸¸å¤§ï¼Œæ¯è¡Œå¤§æ¦‚è‡³å°‘æœ‰8KBçš„æ•°æ®ï¼Œå„ç§å¯¹è±¡ï¼Œå†…å­˜ç”³è¯·ï¼Œè¿™ä¸ªè¿ç§»ç¨‹åºå¯èƒ½ä¼šåƒåˆ°æ•°Gçš„å†…å­˜ã€‚&lt;/li&gt;
  &lt;li&gt;æ€§èƒ½ä¹Ÿä¸å¥½ï¼Œåœ¨è¯»å–æ•°æ®åº“æœŸé—´ï¼Œå…¶å®æ˜¯æµªè´¹äº†çš„&lt;/li&gt;
&lt;/ul&gt;

&lt;h4 id=&quot;ç¬¬äºŒæ¬¡ä¼˜åŒ–&quot;&gt;ç¬¬äºŒæ¬¡ä¼˜åŒ–&lt;/h4&gt;

&lt;p&gt;æŒ‰æ¯ä¸ªå›¢é˜Ÿåˆ’åˆ†ï¼Œåˆ†åˆ«æŸ¥è¯¢ï¼Œå†…å­˜é™ä½äº†ä¸€ç‚¹ï¼Œå› ä¸ºgolangä¸­ï¼Œä½¿ç”¨è¿‡çš„å¯¹è±¡å¹¶ä¸ä¼šç«‹å³GCæ‰ã€‚&lt;/p&gt;

&lt;p&gt;ç”±äºé¢‘ç¹çš„makeå¯¹è±¡ï¼Œæ‰€ä»¥å†…å­˜ä¸ä¼šç«‹å³gcï¼Œå†…å­˜è¿˜æ˜¯æ¯”è¾ƒé«˜çš„ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ç¬¬ä¸‰æ¬¡ä¼˜åŒ–&quot;&gt;ç¬¬ä¸‰æ¬¡ä¼˜åŒ–&lt;/h4&gt;

&lt;p&gt;ä½¿ç”¨golangä¸­çš„PoolåŠŸèƒ½æ¥å¤ç”¨å¯¹è±¡ï¼š&lt;/p&gt;

&lt;div class=&quot;language-golang highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;issueTypePool&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sync&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Pool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
	&lt;span class=&quot;n&quot;&gt;New&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;interface&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IssueType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ•°æ®åº“æŸ¥è¯¢&lt;/p&gt;
&lt;div class=&quot;language-golang highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;issueTypes&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;issueTypePool&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;([]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IssueType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tx&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Select&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;issueTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sql&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;teamUUID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ¢å¤å¯¹è±¡åˆ°å¯¹è±¡æ± ï¼š&lt;/p&gt;
&lt;div class=&quot;language-golang highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;issueTypePool&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Put&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;issueTypes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ ·å·²ç»ä¸é”™äº†ï¼Œå¯¹è±¡èƒ½å¤ç”¨ï¼Œå†…å­˜å ç”¨å–å†³äºæœ€å¤§çš„å›¢é˜Ÿçš„å†…å­˜å ç”¨ã€‚ã€‚&lt;/p&gt;

&lt;h4 id=&quot;ç¬¬å››æ¬¡ä¼˜åŒ–&quot;&gt;ç¬¬å››æ¬¡ä¼˜åŒ–&lt;/h4&gt;

&lt;p&gt;ä½¿ç”¨golangä¸­çš„æ¸¸æ ‡æ–¹å¼ã€‚&lt;/p&gt;

&lt;p&gt;ä¸‹é¢çš„ä»£ç ä¸­æœ‰ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯channelç¼“å†²åŒºï¼Œå¹¶ä¸”åœ¨rowsä¸­è¾¹è¯»è¾¹ä¸¢å…¥channel&lt;/p&gt;

&lt;div class=&quot;language-golang highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AllObjects&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tx&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sq&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DB&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;issueTypeChan&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IssueType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;// ã€‚ã€‚ã€‚ã€‚&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Next&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IssueType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;rows&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Scan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;UUID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TeamUUID&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;DefaultConfigs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
			&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;err&lt;/span&gt;
		&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
		&lt;span class=&quot;n&quot;&gt;issueTypeChan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¯åŠ¨goroutineï¼Œå¹¶åœ¨æŒç»­ä»chanç¼“å†²åŒºè¯»å–æ•°æ®ï¼ŒåŒæ—¶å¯¹æ•°æ®ä¿®æ”¹è¿ç§»ï¼Œå¹¶å†™å…¥æ•°æ®åº“ã€‚&lt;/p&gt;

&lt;div class=&quot;language-golang highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;issueTypeChan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IssueType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;doneChan&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NewTimer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Second&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Stop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;go&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;select&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;C&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;nb&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;doneChan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Println&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;done...&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;it&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;issueTypeChan&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;timer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Reset&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Second&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;// TODO ....&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ ·å°±æ¯”è¾ƒæ»¡æ„äº†ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼è¿˜æ²¡æœ‰ç»è¿‡æµ‹è¯•ï¼Œç†è®ºä¸Šè¯»å†™åˆ†ç¦»ä¹‹åï¼Œæ€§èƒ½æ˜¯æ›´ä¼˜çš„ã€‚&lt;/p&gt;</content><author><name>moli</name></author><category term="go" /><category term="æ•°æ®åº“" /><category term="golang" /><category term="upgrate" /><category term="database" /><summary type="html">æœ€è¿‘åœ¨æ•°æ®è¿ç§»ä¸­çš„ä¸€äº›ä¼˜åŒ–ç‚¹ï¼Œåœ¨è¿™é‡Œåˆ†äº«ä¸€äº›ï¼Œå½“ç„¶ä¹Ÿä¸ä¸€å®šæ˜¯æœ€ä¼˜çš„ï¼Œæ¬¢è¿è®¨è®ºã€‚</summary></entry><entry><title type="html">å‡çº§go1.12ç‰ˆæœ¬é‡åˆ°çš„é—®é¢˜</title><link href="https://mozz.in/go/2019/08/16/go1.12-upgrade-problem.html" rel="alternate" type="text/html" title="å‡çº§go1.12ç‰ˆæœ¬é‡åˆ°çš„é—®é¢˜" /><published>2019-08-16T23:30:00+08:00</published><updated>2019-08-16T23:30:00+08:00</updated><id>https://mozz.in/go/2019/08/16/go1.12-upgrade-problem</id><content type="html" xml:base="https://mozz.in/go/2019/08/16/go1.12-upgrade-problem.html">&lt;p&gt;å‡çº§åˆ° go1.12 ç¢°åˆ°ä¸€ä¸ªä¾èµ–ç‰ˆæœ¬é—®é¢˜&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;xxxxxxx/vendor/go4.org/reflectutil.typedmemmove: relocation target runtime.typedmemmove not defined for ABI0 (but is defined for ABIInternal)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è§£å†³æ–¹æ¡ˆï¼š&lt;/p&gt;

&lt;p&gt;åˆ é™¤ vendor ç›®å½•ä¸­çš„ go4.org ç›®å½•&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;æ‰§è¡Œï¼šgovendor update go4.org/reflectutil

æ€»ä¹‹å°±æ˜¯æ›´æ–°è¿™ä¸ªåŒ…åˆ°æ–°ç‰ˆ
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å³å¯&lt;/p&gt;

&lt;p&gt;=========&lt;/p&gt;

&lt;p&gt;å¥¶ä¸€æ³¢æˆ‘çš„ä¸€ä¸ªç½‘ç«™ï¼š&lt;a href=&quot;https://v2geek.com&quot;&gt;https://v2geek.com&lt;/a&gt; ï¼Œæ¬¢è¿å¤§å®¶æ¥è´©å–è‡ªå·±çš„è½¯ä»¶ã€‚&lt;/p&gt;</content><author><name>moli</name></author><category term="go" /><category term="golang" /><category term="upgrate" /><summary type="html">å‡çº§åˆ° go1.12 ç¢°åˆ°ä¸€ä¸ªä¾èµ–ç‰ˆæœ¬é—®é¢˜</summary></entry><entry><title type="html">æ¢ä¸ªæ–°åšå®¢çš®è‚¤</title><link href="https://mozz.in/%E5%8D%9A%E5%AE%A2/2019/08/07/new-style.html" rel="alternate" type="text/html" title="æ¢ä¸ªæ–°åšå®¢çš®è‚¤" /><published>2019-08-07T08:30:00+08:00</published><updated>2019-08-07T08:30:00+08:00</updated><id>https://mozz.in/%E5%8D%9A%E5%AE%A2/2019/08/07/new-style</id><content type="html" xml:base="https://mozz.in/%E5%8D%9A%E5%AE%A2/2019/08/07/new-style.html">&lt;p&gt;å‘¼å‘¼ï¼Œæ™šä¸ŠåŠ ç­ä¸Šçº¿æ¯”è¾ƒæ— èŠï¼Œæ‰€ä»¥æ¢ä¸ªåšå®¢çš®è‚¤ï¼Œæ„Ÿè§‰æ¸…çˆ½ä¸€äº›~&lt;/p&gt;

&lt;p&gt;ç§äº†ä¸‹åå¤šå¹´å‰å†™çš„åšå®¢ï¼Œæ„Ÿè§‰å¥½å‚»é€¼ã€‚ã€‚ã€‚ğŸ™„&lt;/p&gt;

&lt;p&gt;æ„Ÿæ…¨æ—¶å…‰é£é€~~ ç«Ÿå·²æ˜¯å­©å­ä»–çˆ¹~~~~&lt;/p&gt;

&lt;p&gt;=========&lt;/p&gt;

&lt;p&gt;å¥¶ä¸€æ³¢æˆ‘çš„ä¸€ä¸ªç½‘ç«™ï¼š&lt;a href=&quot;https://v2geek.com&quot;&gt;https://v2geek.com&lt;/a&gt; ï¼Œæ¬¢è¿å¤§å®¶æ¥è´©å–è‡ªå·±çš„è½¯ä»¶ã€‚&lt;/p&gt;</content><author><name>moli</name></author><category term="åšå®¢" /><summary type="html">å‘¼å‘¼ï¼Œæ™šä¸ŠåŠ ç­ä¸Šçº¿æ¯”è¾ƒæ— èŠï¼Œæ‰€ä»¥æ¢ä¸ªåšå®¢çš®è‚¤ï¼Œæ„Ÿè§‰æ¸…çˆ½ä¸€äº›~</summary></entry><entry><title type="html">å­¦ä¹ Rust</title><link href="https://mozz.in/rust/2019/08/04/study-rust.html" rel="alternate" type="text/html" title="å­¦ä¹ Rust" /><published>2019-08-04T06:10:00+08:00</published><updated>2019-08-04T06:10:00+08:00</updated><id>https://mozz.in/rust/2019/08/04/study-rust</id><content type="html" xml:base="https://mozz.in/rust/2019/08/04/study-rust.html">&lt;p&gt;æœ€è¿‘æƒ³å­¦ rust ä¸»è¦æ˜¯å¥½å¥‡å¿ƒã€‚ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å® 2016 å¹´å°±æ¥è§¦è¿‡ï¼Œä½†æ˜¯å½“æ—¶å­¦å¾—æœ‰ç‚¹éš¾å—ï¼Œäºæ˜¯æ”¾å¼ƒäº†ï¼Œä¹Ÿæ²¡æœ‰ç›®æ ‡æ€§ã€‚&lt;/p&gt;

&lt;p&gt;äºæ˜¯ç°åœ¨åˆå­¦ä¸€ä¸‹ rust~ æ„Ÿè§‰è¿˜æ˜¯æœ‰å¿…è¦æŒæ¡ä¸€é—¨é«˜æ€§èƒ½çš„è¯­è¨€ï¼Œè™½ç„¶ c/cpp ä¹Ÿå¯ä»¥ï¼Œä½†æ˜¯æ¯•ç«Ÿè¿˜æ˜¯æœ‰ç‚¹å¤è€äº†ã€‚&lt;/p&gt;

&lt;p&gt;è€Œä¸”æ¯”è¾ƒçœ‹å¥½ rustï¼Œå“ˆå“ˆã€‚&lt;/p&gt;

&lt;p&gt;è€Œä¸”æœ€è¿‘æƒ³æ•´ä¸€ä¸ªå°é¡¹ç›®ï¼Œéœ€è¦ä¸€ç‚¹é«˜æ€§èƒ½çš„ä¸œè¥¿ï¼Œè™½ç„¶ç†è®ºä¸Š golang å®Œå…¨å¤Ÿç”¨äº†ï¼Œä½†æ˜¯å°±å½“å­¦ä¸€ä¸ªæ–°ä¸œè¥¿ï¼Œé¡ºä¾¿ç”¨èµ·æ¥ï¼Œä¹ŸæŒºå¥½çš„ã€‚&lt;/p&gt;

&lt;p&gt;å®Œæ¯•ã€‚ã€‚ã€‚&lt;/p&gt;

&lt;p&gt;=========== 8 æœˆ 7 å·æ›´æ–°&lt;/p&gt;

&lt;p&gt;rust å­¦ä¹ ç¡®å®æ¯”è¾ƒé™¡ï¼Œä¼°è®¡å­¦ 1 ä¸ªæœˆæ‰èƒ½ä¸Šæ‰‹~~~ æ‰€ä»¥æŠ•å…¥äº§å‡ºæ¯”å¤ªä½äº†~~~ å…ˆå¼ƒå‘äº†~~~&lt;/p&gt;

&lt;p&gt;å¥¶ä¸€æ³¢æˆ‘çš„ä¸€ä¸ªç½‘ç«™ï¼š&lt;a href=&quot;https://v2geek.com&quot;&gt;https://v2geek.com&lt;/a&gt; ï¼Œæ¬¢è¿å¤§å®¶æ¥è´©å–è‡ªå·±çš„è½¯ä»¶ã€‚&lt;/p&gt;</content><author><name>moli</name></author><category term="rust" /><category term="rust" /><category term="study" /><summary type="html">æœ€è¿‘æƒ³å­¦ rust ä¸»è¦æ˜¯å¥½å¥‡å¿ƒã€‚ã€‚</summary></entry><entry><title type="html">golangå†™ä¸€ä¸ªé…ç½®åŒæ­¥å·¥å…·</title><link href="https://mozz.in/golang/2019/07/08/golang-synconfig.html" rel="alternate" type="text/html" title="golangå†™ä¸€ä¸ªé…ç½®åŒæ­¥å·¥å…·" /><published>2019-07-08T06:56:00+08:00</published><updated>2019-07-08T06:56:00+08:00</updated><id>https://mozz.in/golang/2019/07/08/golang-synconfig</id><content type="html" xml:base="https://mozz.in/golang/2019/07/08/golang-synconfig.html">&lt;p&gt;å¼€æºåœ°å€ï¼š&lt;a href=&quot;https://github.com/molizz/synconfig&quot;&gt;https://github.com/molizz/synconfig&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;synconfig-æ˜¯ä»€ä¹ˆ&quot;&gt;Synconfig æ˜¯ä»€ä¹ˆ&lt;/h3&gt;

&lt;p&gt;è¿™ä¸ªå·¥å…·æ˜¯åŸºäº boltDB å¼€å‘çš„åŸºäº http åè®®çš„ é…ç½®åŒæ­¥å·¥å…·ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸ªçš„åˆè¡·æ˜¯ä¹‹å‰å†™ä¸€ä¸ªä½ æ‡‚å¾—å·¥å…·ï¼Œç„¶ååœ¨åˆ†å¸ƒåœ¨å„åœ°æœåŠ¡å™¨ï¼Œå¦‚æœæ¯æ¬¡å¢åŠ ä¸ªæ–°çš„æœåŠ¡å™¨ï¼Œé‚£ä¹ˆå°±è¦é‡æ–°åŒæ­¥é…ç½®ï¼Œæ€»ä¹‹éå¸¸å®¹æ˜“å‡ºé”™ï¼Œæ˜¯ä¸€ä¸ªéå¸¸ä¸å¯é çš„è®¾è®¡ã€‚&lt;/p&gt;

&lt;p&gt;äºæ˜¯å°±æƒ³æ•´ä¸€ä¸ªâ€œé…ç½®ä¸­å¿ƒâ€çš„åŠŸèƒ½ï¼Œæœ€å¼€å§‹æƒ³ç”¨ etcdï¼Œä½†æ˜¯å¥½åƒæœ‰ç‚¹å¤æ‚äº†ï¼Œæ‰€ä»¥æ„Ÿè§‰è‡ªå·±å†™äº†ä¸€ä¸ª æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ã€‚&lt;/p&gt;

&lt;p&gt;ç¬¬ä¸‰æ–¹çš„è½¯ä»¶ï¼Œç›´æ¥é›†æˆå®¢æˆ·ç«¯çš„åŠŸèƒ½ï¼Œå°±å®ç°é…ç½®çš„åŒæ­¥äº†ã€‚&lt;/p&gt;

&lt;p&gt;å®ç° é…ç½® ä¸ æœåŠ¡çš„è§£è€¦ã€‚&lt;/p&gt;

&lt;p&gt;å½“æœ‰æ–°çš„é…ç½®æ›´æ–°æ—¶ï¼Œæ‰€æœ‰çš„å®¢æˆ·ç«¯èƒ½è‡ªåŠ¨æ”¶åˆ°æ–°çš„é…ç½®ï¼Œè‡ªåŠ¨æ›´æ–°è‡ªèº«ã€‚&lt;/p&gt;

&lt;p&gt;é€ è¿™ä¸ªè½®å­ä¸ä»…ä»…æ˜¯ä¸ºäº†â€œä½ æ‡‚å¾—â€çš„è½¯ä»¶ï¼Œæœªæ¥æˆ‘çš„ä»»ä½•æ–°çš„ä¸€äº›æœåŠ¡ï¼Œéƒ½å¯ä»¥ç›´æ¥é›†æˆå®¢æˆ·ç«¯ï¼Œå¹¶ä¸”å¿«é€Ÿä¸Šçº¿&lt;/p&gt;

&lt;h3 id=&quot;åŸºæœ¬å®ç°&quot;&gt;åŸºæœ¬å®ç°&lt;/h3&gt;

&lt;p&gt;â€œé…ç½®ä¸­å¿ƒâ€ æœåŠ¡ç«¯éœ€è¦è¿è¡Œåœ¨æŸä¸ªæœåŠ¡å™¨çš„ã€‚æˆ‘æ˜¯åœ¨ vultr ä¸Šè´­ä¹°äº†ä¸€ä¸ªæœ€ä½é…çš„æœåŠ¡å™¨ï¼Œæ¯ä¸ªæœˆ 3.5 åˆ€ï¼Œè¿˜å¯ä»¥ï¼Œä¸Šé¢è¿˜è·‘äº†ä¸€äº›å…¶ä»–çš„æœåŠ¡ã€‚&lt;/p&gt;

&lt;p&gt;â€œå®¢æˆ·ç«¯â€ é…ç½®å¥½æœåŠ¡å™¨ç«¯åï¼Œå°±ä¼šéš”å‡ ç§’é€šè¿‡è‡ªå·±çš„ stamp æ¥è·å–æ–°çš„é…ç½®ï¼Œä»è€Œæ›´æ–°è‡ªèº«çš„é…ç½®ã€‚&lt;/p&gt;

&lt;p&gt;é€šè®¯ä¸Šä½¿ç”¨ token æ¥æ ¡éªŒï¼Œå¹¶ä¸”å¯ä»¥é…ç½® https æ¥é€šè®¯ï¼Œé¿å… token å¤–æ³„ï¼Œä¹Ÿå»ºè®®ä½¿ç”¨ https æ¥ä¸æœåŠ¡ç«¯é€šè®¯ï¼Œé¿å… token è¢«æ£€æµ‹åˆ°ã€‚&lt;/p&gt;

&lt;h3 id=&quot;å…¶ä»–&quot;&gt;å…¶ä»–&lt;/h3&gt;

&lt;p&gt;é€šè¿‡å†™è¿™ä¹ˆä¸€ä¸ªç®€å•çš„â€œåŸºç¡€è®¾æ–½â€ï¼Œè¿˜æ˜¯æŒºå¥½ç©çš„ã€‚&lt;/p&gt;

&lt;p&gt;æˆ‘è®¾æƒ³çš„ä¸€äº›å¾ˆå¤šåŠŸèƒ½ï¼Œéƒ½ä¼šé›†æˆè¿™ä¸ªæœåŠ¡ç«¯ã€‚&lt;/p&gt;

&lt;p&gt;å¥¶ä¸€æ³¢æˆ‘çš„ä¸€ä¸ªç½‘ç«™ï¼š&lt;a href=&quot;https://v2geek.com&quot;&gt;https://v2geek.com&lt;/a&gt; ï¼Œæ¬¢è¿å¤§å®¶æ¥è´©å–è‡ªå·±çš„è½¯ä»¶ã€‚&lt;/p&gt;</content><author><name>moli</name></author><category term="golang" /><category term="golang" /><category term="synconfig" /><summary type="html">å¼€æºåœ°å€ï¼šhttps://github.com/molizz/synconfig</summary></entry><entry><title type="html">Golangå‡½æ•°çº§åˆ«çš„ç›‘æ§</title><link href="https://mozz.in/golang/2019/01/28/golang-function-profile.html" rel="alternate" type="text/html" title="Golangå‡½æ•°çº§åˆ«çš„ç›‘æ§" /><published>2019-01-28T08:56:00+08:00</published><updated>2019-01-28T08:56:00+08:00</updated><id>https://mozz.in/golang/2019/01/28/golang-function-profile</id><content type="html" xml:base="https://mozz.in/golang/2019/01/28/golang-function-profile.html">&lt;blockquote&gt;
  &lt;p&gt;golangå‡½æ•°çº§åˆ«çš„ç›‘æ§ä¸»è¦ä½¿ç”¨pprofåŒ…ä¸­çš„&lt;a href=&quot;https://golang.org/src/runtime/pprof/pprof.go?s=23119:23158#L730&quot;&gt;StartCPUProfile&lt;/a&gt;Â å‡½æ•°ä¸Â &lt;a href=&quot;https://golang.org/src/runtime/pprof/pprof.go?s=25047:25068#L789&quot;&gt;StopCPUProfile&lt;/a&gt;&lt;/p&gt;

  &lt;p&gt;æœ¬æŠ¥å‘Šä¸»è¦æ˜¯å›´ç»•è¿™ä¸ªç›‘æ§æ¥.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;ç›‘æ§å‡½æ•°æ€§èƒ½çš„ç›®çš„&quot;&gt;ç›‘æ§å‡½æ•°æ€§èƒ½çš„ç›®çš„&lt;/h2&gt;

&lt;p&gt;é™¤äº†sqlæ…¢æŸ¥è¯¢ç›‘æ§, ç½‘ç»œæƒ…å†µç­‰ç›‘æ§, æˆ‘ä»¬åº”è¯¥ä¹Ÿå¿…é¡»ç›‘æ§åˆ°å‡½æ•°çš„æ€§èƒ½. å¦‚æœå› ä¸ºä¸åˆç†çš„ä»£ç å¯¼è‡´æ¥å£å˜æ…¢, å†…å­˜å˜å¤šç­‰é—®é¢˜, åº”èƒ½è¢«ç›‘æ§å¹¶å¤„ç†çš„.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æé«˜æ¥å£å“åº”é€Ÿåº¦&lt;/li&gt;
  &lt;li&gt;æå‰é¢„çŸ¥é—®é¢˜, å¹¶å°½æ—©å¤„ç†, è€Œä¸æ˜¯ç­‰åˆ°å¤§èŒƒå›´çš„å®¢æˆ·æ„ŸçŸ¥è¢«åŠ¨å“åº”(å‡å°‘è¢«åŠ¨ç‡, æé«˜ä¸»åŠ¨ç‡)&lt;/li&gt;
  &lt;li&gt;è®©ç¨‹åºå‘˜å†™å‡ºæ›´å¥½çš„ä»£ç &lt;/li&gt;
  &lt;li&gt;æœ€ç»ˆçš„ç›®æ ‡æ˜¯åœ¨æ€§èƒ½é—®é¢˜è¢«å®¢æˆ·æ„ŸçŸ¥,æ”¾å¤§ä¹‹å‰, å°†æ€§èƒ½é—®é¢˜è§£å†³æ‰&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;pprofç®€å•ä»‹ç»&quot;&gt;PProfç®€å•ä»‹ç»&lt;/h3&gt;

&lt;p&gt;è¿›ç¨‹ä¸­çš„æ€§èƒ½é—®é¢˜ä¸»è¦é‡‡ç”¨StartCPUProfile &amp;amp; StopCPUProfileå‡½æ•°.&lt;/p&gt;

&lt;p&gt;è¿™ä¸¤ä¸ªå‡½æ•°æ˜¯golangè‡ªå¸¦çš„æ€§èƒ½é‡‡é›†å‡½æ•°, ç”¨äºå¸®åŠ©å¼€å‘è€…æ£€æŸ¥å¹¶åˆ†æè¿›ç¨‹ä¸­çš„æ€§èƒ½é—®é¢˜.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;StartCPUProfile å¼€å§‹é‡‡é›†è¿è¡Œæ ˆ, å¹¶ä¿å­˜èµ·æ¥&lt;/li&gt;
  &lt;li&gt;StopCPUProfile åœæ­¢é‡‡é›†&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨pprofä¼šæœ‰ä»€ä¹ˆé—®é¢˜&quot;&gt;ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨PProfä¼šæœ‰ä»€ä¹ˆé—®é¢˜&lt;/h3&gt;

&lt;p&gt;é‚£ä¹ˆç›´æ¥åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä¼šå¯¹ä¸»è¿›ç¨‹é€ æˆä»€ä¹ˆå½±å“å‘¢?&lt;/p&gt;

&lt;p&gt;golangä¸­çš„åº•å±‚readProfileå‡½æ•°:&lt;/p&gt;

&lt;div class=&quot;language-golang highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;c&quot;&gt;// readProfile, provided by the runtime, returns the next chunk of&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;// binary CPU profiling stack trace data, blocking until data is available.&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;// If profiling is turned off and all the profile data accumulated while it was&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;// on has been returned, readProfile returns eof=true.&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;// The caller must save the returned data and tags before calling readProfile again.&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;readProfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;uint64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tags&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;unsafe&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Pointer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;eof&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç›®æµ‹ä¸ä¼šå¯¹ä¸»åŸé€ æˆè´Ÿæ‹….&lt;/p&gt;

&lt;h2 id=&quot;è§£å†³æ–¹æ¡ˆ&quot;&gt;è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;

&lt;h3 id=&quot;åˆ†æprofæ•°æ®&quot;&gt;åˆ†æprofæ•°æ®&lt;/h3&gt;

&lt;p&gt;åˆšå¼€å§‹æ¥è§¦ä½¿ç”¨StartCPUProfileçš„æ—¶å€™, æ„Ÿè§‰æ˜¯ä¸€ä¸ªæœ¬åœ°ä½¿ç”¨çš„å·¥å…·, å¹¶ä¸è§‰å¾—å¯ä»¥ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒ(æ²¡çœ‹æºç )&lt;/p&gt;

&lt;p&gt;ä½†æ˜¯å‚è€ƒÂ &lt;a href=&quot;http://github.com/stackimpact/stackimpact-go&quot;&gt;http://github.com/stackimpact/stackimpact-go&lt;/a&gt;Â çš„æºç å, å‘ç°å…¶å®StartCPUProfileæ˜¯å¯ä»¥è¢«é›†æˆåˆ°ç”Ÿäº§ç¯å¢ƒçš„æ€§èƒ½ç›‘æ§çš„.&lt;/p&gt;

&lt;p&gt;ç–‘æƒ‘&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;å¦‚ä½•è§£ç StartCPUProfileäº§ç”Ÿçš„pprofæ•°æ®&lt;/li&gt;
  &lt;li&gt;å¦‚ä½•ç»Ÿè®¡&amp;amp;é‡åŒ–profileæ•°æ®Â &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;é¡ºç€è¿™ä¸ªæ€è·¯, å¼€å§‹ç ”ç©¶golangä¸­çš„go tool pprof ç›¸å…³çš„å‘½ä»¤æºç , å¹¶æŸ¥é˜… stackimpact æºç .&lt;/p&gt;

&lt;p&gt;go tool pprof çš„å‘½ä»¤æ˜¯åŸºäºÂ &lt;a href=&quot;https://github.com/google/pprof/&quot;&gt;https://github.com/google/pprof/&lt;/a&gt;Â å®ç°çš„.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;æ•°æ®é€šè¿‡Â &lt;a href=&quot;https://developers.google.com/protocol-buffers&quot;&gt;protocol-buffers&lt;/a&gt;Â åè®®å­˜å‚¨&lt;/li&gt;
  &lt;li&gt;profileçš„æ•°æ®ç»“æ„:Â &lt;a href=&quot;https://github.com/google/pprof/blob/master/proto/profile.proto&quot;&gt;https://github.com/google/pprof/blob/master/proto/profile.proto&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;è§£ç åŠŸèƒ½å¯ä»¥åœ¨ google/pprof åº“é‡Œé¢æ‰¾åˆ°.
    &lt;ul&gt;
      &lt;li&gt;google/pprof/profile.Parse()&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æŸ¥é˜…å®Œä¸Šé¢çš„æ–‡æ¡£åå¯çŸ¥é“:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;StartCPUProfileè¾“å‡ºçš„ç»“æœæ˜¯ç”¨çš„google/pprofä¿å­˜ + GZipæ–¹å¼å‹ç¼©è¿‡çš„&lt;/li&gt;
  &lt;li&gt;è¾“å‡ºçš„ç»“æœ(xxx.prof) æ–‡ä»¶æ˜¯å¯ä»¥é€šè¿‡gzip.Reader è§£ç å, é€šè¿‡google/pprofä¸­çš„åºåˆ—åŒ–æˆä¸€ä¸ªç»“æ„ä½“çš„&lt;/li&gt;
  &lt;li&gt;ç»“æ„ä½“ä¸­å†…å®¹å¦‚ä¸‹:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-golang highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;k&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Profile&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;SampleType&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ValueType&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;Sample&lt;/span&gt;     &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Sample&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;Mapping&lt;/span&gt;    &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Mapping&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;Location&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Location&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;Function&lt;/span&gt;   &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Function&lt;/span&gt;

    	&lt;span class=&quot;n&quot;&gt;DropFrames&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;KeepFrames&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;

    	&lt;span class=&quot;n&quot;&gt;TimeNanos&lt;/span&gt;     &lt;span class=&quot;kt&quot;&gt;int64&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;DurationNanos&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int64&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;PeriodType&lt;/span&gt;    &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ValueType&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;Period&lt;/span&gt;        &lt;span class=&quot;kt&quot;&gt;int64&lt;/span&gt;

    	&lt;span class=&quot;n&quot;&gt;dropFramesX&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int64&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;keepFramesX&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int64&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;stringTable&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h4 id=&quot;è§£ç pprofæ•°æ®&quot;&gt;è§£ç PProfæ•°æ®:&lt;/h4&gt;

&lt;div class=&quot;language-golang highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;c&quot;&gt;// å°†ç›‘æ§çš„ç»“æœå†™å…¥å†…å­˜&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;buff&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bytes&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Buffer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bufio&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NewWriter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;pprof&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StartCPUProfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pprof&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StopCPUProfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;// è§£ç æ•°æ®(ä¼ªä»£ç )&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;github&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;com&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;google&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pprof&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;profile&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;encodeBuff&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;gzip&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Reader&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;buff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;profile&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Parse&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;encodeBuff&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é€šè¿‡ä¸Šé¢çš„ä¼ªä»£ç å¯ä»¥äº†è§£åˆ°è¿™ä¸ªæœé›†pprofçš„ç»“æœ.&lt;/p&gt;

&lt;h4 id=&quot;ç»“è®º-æš‚æ—¶åªè€ƒè™‘-å®šæ—¶ç›‘æ§-çš„æ–¹å¼&quot;&gt;ç»“è®º: æš‚æ—¶åªè€ƒè™‘ â€œå®šæ—¶ç›‘æ§â€ çš„æ–¹å¼&lt;/h4&gt;

&lt;div class=&quot;language-golang highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;StartCPUProfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;w&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;io&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Writer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;error&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;// cpué”&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;cpu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Lock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    	&lt;span class=&quot;k&quot;&gt;defer&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cpu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Unlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cpu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;done&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    		&lt;span class=&quot;n&quot;&gt;cpu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;done&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;make&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;chan&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;bool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    	&lt;span class=&quot;c&quot;&gt;// åŒé‡é”&lt;/span&gt;
    	&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cpu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;profiling&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fmt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Errorf&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cpu profiling already in use&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;cpu&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;profiling&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;true&lt;/span&gt;
            &lt;span class=&quot;c&quot;&gt;// ...&lt;/span&gt;
    	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;nil&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;å®šæ—¶ç›‘æ§-å®ç°&quot;&gt;â€œå®šæ—¶ç›‘æ§â€ å®ç°&lt;/h3&gt;

&lt;div class=&quot;language-golang highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;c&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;f&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TickerProfiler&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tickerFunc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;c&quot;&gt;// ...&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;// ä¿æŒåˆ°é˜Ÿåˆ—&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ProfilesData&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;AddNewProfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;newProfile&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;c&quot;&gt;// ...&lt;/span&gt;
    	&lt;span class=&quot;n&quot;&gt;p&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;list&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Push&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;profile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;c&quot;&gt;// é€šè¿‡æ¥å£+æ—¶é—´æˆ³è·å–é˜Ÿåˆ—ä¸­çš„å¢é‡æ•°æ®&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;GetProfiles&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stamp&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int64&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Profile&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    	&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;profiles&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;é€šè¿‡æ¯éš”ä¸€æ®µæ—¶é—´æ‰§è¡Œ StartCPUProfile è¿›è¡Œé‡‡é›†å¹¶ä¿æŒåˆ°é˜Ÿåˆ—åˆ—è¡¨ä¸­&lt;/p&gt;

&lt;p&gt;å®šæ—¶ç›‘æ§â€ä¼˜ç‚¹:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;å¯¹ä¸»è¿›ç¨‹å½±å“è¾ƒä½&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç¼ºç‚¹:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;é¢—ç²’åº¦è¾ƒå¤§, ä¸ä¸€å®šèƒ½å®æ—¶å‘½ä¸­åˆ°åˆ°è¾ƒæ…¢çš„å‡½æ•°(ä½†ç†è®ºä¸Šå¯ä»¥å‘½å¤§æ‰€æœ‰çš„å‡½æ•°)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;ä¸­é—´ä»¶-å®ç°&quot;&gt;â€œä¸­é—´ä»¶â€ å®ç°&lt;/h3&gt;

&lt;p&gt;é€šè¿‡router.goä¸­åŠ å…¥begin/doneçš„æ–¹å¼ç›‘æ§å„ä¸ªæ¥å£è¯·æ±‚çš„æ€§èƒ½&lt;/p&gt;

&lt;div class=&quot;language-golang highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;c&quot;&gt;// ä¼ªä»£ç &lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Use&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StartCPUProfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;c&quot;&gt;// æ¥å£&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Done&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;StopCPUProfile&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä¼˜ç‚¹:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;é¢—ç²’åº¦å¤Ÿç»†&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç¼ºç‚¹&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;StartCPUProfile æœ¬èº«æ˜¯å…¨å±€é”, åŒæ—¶åªèƒ½è¿è¡Œä¸€ä¸ªè¯¥å‡½æ•°&lt;/li&gt;
  &lt;li&gt;åœ¨å¹¶å‘æ¡ä»¶ä¸‹, ä¾ç„¶å¯èƒ½ä¼šå¯¼è‡´å…¶ä»–æ¥å£æ— æ³•è¢«ç›‘æ§åˆ°.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;å¦‚ä½•é‡åŒ–ç›‘æ§åˆ°çš„æ•°æ®&quot;&gt;å¦‚ä½•é‡åŒ–ç›‘æ§åˆ°çš„æ•°æ®&lt;/h3&gt;

&lt;p&gt;é‡‡é›†åˆ°æ•°æ®å, å¯é€šè¿‡grafanaå°†æ•°æ®å±•ç¤ºå‡ºæ¥, å¹¶æä¾›é¢„è­¦ç­‰&lt;/p&gt;

&lt;h3 id=&quot;å¼€æºåº“&quot;&gt;å¼€æºåº“&lt;/h3&gt;

&lt;p&gt;æ ¹æ®è¿™ç¯‡æ–‡ç« å†™ä¸€ä¸ªgolangçš„ç›‘æ§åº“:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/molizz/funcpprof&quot;&gt;https://github.com/molizz/funcpprof&lt;/a&gt;&lt;/p&gt;</content><author><name>moli</name></author><category term="golang" /><category term="golang" /><summary type="html">golangå‡½æ•°çº§åˆ«çš„ç›‘æ§ä¸»è¦ä½¿ç”¨pprofåŒ…ä¸­çš„StartCPUProfileÂ å‡½æ•°ä¸Â StopCPUProfile æœ¬æŠ¥å‘Šä¸»è¦æ˜¯å›´ç»•è¿™ä¸ªç›‘æ§æ¥.</summary></entry></feed>